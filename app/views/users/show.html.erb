<p class="text-success text-center" id="notice"><%= notice %></p>
<% unless @user.manager_id.nil? %>
<% @manager = User.find(@user.manager_id) %>
<% end %>

<div class="container-fluid">
  <div class="card border-dark mb-3 mx-auto">
    <div class="card-header">
      <div class="row">
        <div class="col-6 text-left">
          <strong><%= @team.name %></strong>
        </div>
        <div class="col-6 text-right">
          <strong><%= @user.title %></strong>
        </div>
      </div>
    </div>
    <div class="card-body text-dark">
      <div class="col-md text-center">
        <%= image_tag("avatar", class: "img-fluid rounded-circle", style: "max-height: 300px; width: auto;") %>
      </div>
      <h5 class="card-title text-center pt-3 pb-0 mb-0"><%= @user.first_name + " " + @user.last_name %></h5>
      <p class="card-text text-muted text-center pt-0 mt-0 pb-0 mb-2">
        <small><%= "Since " + @user.started_at.strftime("%B %d, %Y") %></small>
      </p>
      <div class="row">
        <div class="col-sm-6">
          <div class="card" style="height: 100%;">
            <div class="card-header text-center">
              <strong>Info</strong>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bio:<h5>
              <small class="card-text">"<%=  @user.bio %>"</small>
              <br><br>
              <small>
                <ul>
                  <% unless @manager.nil? %>
                  <li>
                    <strong>Reports To:</strong>
                    <%= link_to team_user_path(@team, @manager), :class => "no-deco" do %>
                    <%= @manager.last_name + ", " + @manager.first_name %>
                    <% end %>
                  </li>
                  <br>
                  <% end %>
                  <li>
                    <strong>Email:</strong>
                    <%= @user.email %>
                  </li>
                  <br>
                  <li>
                    <strong>Slack:</strong>
                    <%= @user.slack %>
                  </li>
                </ul>
              </small>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="card mb-2">
            <div class="card-header">
              <strong>Badges</strong>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="mx-auto">
                  <% if @user_badges.where(badge: 1).empty? %>
                  <%= image_tag("img_solveforthecustomer_grey", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-secondary">0</span>
                  <% else %>
                  <%= image_tag("img_solveforthecustomer", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-danger"><%= @user_badges.where(badge: 1).where(active: true).count %></span>
                  <% end %>
                </div>
                <div class="mx-auto">
                  <% if @user_badges.where(badge: 2).empty? %>
                  <%= image_tag("img-this-is-your-baby_grey", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-secondary">0</span>
                  <% else %>
                  <%= image_tag("img-this-is-your-baby", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-danger"><%= @user_badges.where(badge: 2).where(active: true).count %></span>
                  <% end %>
                </div>
                <div class="mx-auto">
                  <% if @user_badges.where(badge: 3).empty? %>
                  <%= image_tag("img_everyminutecounts_grey", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-secondary">0</span>
                  <% else %>
                  <%= image_tag("img_everyminutecounts", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-danger"><%= @user_badges.where(badge: 3).where(active: true).count %></span>
                  <% end %>
                </div>
                <div class="mx-auto">
                  <% if @user_badges.where(badge: 4).empty? %>
                  <%= image_tag("img-of-course-but-maybe_grey", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-secondary">0</span>
                  <% else %>
                  <%= image_tag("img-of-course-but-maybe", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-danger"><%= @user_badges.where(badge: 4).where(active: true).count %></span>
                  <% end %>
                </div>
                <div class="mx-auto">
                  <% if @user_badges.where(badge: 5).empty? %>
                  <%= image_tag("img_gofartogether_grey", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-secondary">0</span>
                  <% else %>
                  <%= image_tag("img_gofartogether", class: "img-fluid rounded-circle", style: "max-height: 100px; width: auto;") %>
                  <span class="float-right badge badge-pill badge-danger"><%= @user_badges.where(badge: 5).where(active: true).count %></span>
                  <% end %>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="mx-auto">
                  <%= link_to 'See All Badges', team_user_user_badges_path(@team, @user), :class => "btn btn-outline-primary" %>
                  <%= link_to 'Give A Badge!', new_team_user_user_badge_path(@team, @user), :class => "btn btn-primary" %>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-2">
            <div class="card-header">
              <strong>Skills</strong>
            </div>
            <div class="card-body">
              <h5 class="card-title">Skills would go here</h5>
              <p class="card-text">Skill tags would go here. Once skill tags exceed a certain number, a link to see all replaces last skill</p>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col mt-3">
          <%= link_to 'Edit', edit_team_user_path(@team, @user), :class => "btn btn-outline-secondary" %>
          <%= link_to team_users_path(@team), :class => "btn btn-outline-primary" do %>
          Back To <%= @team.name %>
          <% end %>
        </div>
    </div>
    </div>
  </div>
</div>
